{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aidan\\\\Documents\\\\aaf\\\\frontend\\\\src\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport React from \"react\";\nimport jwtDecode from 'jwt-decode';\nimport { useNavigate } from 'react-router-dom';\nimport { Token } from '../../../../AppData/Local/Microsoft/TypeScript/4.5/node_modules/acorn/dist/acorn';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const history = useNavigate();\n  const [q, setq] = React.useState('');\n\n  async function getuser() {\n    const data = await fetch('http:localhost:5000/users/q', {\n      headers: {\n        'x-access-token': localStorage.getItem('token')\n      }\n    });\n    const req = req.json();\n\n    if (req.status === 'ok') {\n      setq(req.q);\n    } else {\n      alert(req.error);\n    }\n  }\n\n  React.useEffect(() => {\n    const token = localStorage.getItem('token');\n    console.log(token);\n\n    if (token) {\n      const user = jwtDecode(token);\n      console.log(user);\n      console.log('1');\n\n      if (!user) {\n        console.log('2');\n        localStorage.removeItem('token');\n        window.location.href('/login');\n      } else {\n        console.log('3');\n        getuser();\n      }\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"server response\", q || 'no response']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Home, \"/0VKRbTyNownPeaVE84IADp6maI=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/aidan/Documents/aaf/frontend/src/Home.js"],"names":["React","jwtDecode","useNavigate","Token","Home","history","q","setq","useState","getuser","data","fetch","headers","localStorage","getItem","req","json","status","alert","error","useEffect","token","console","log","user","removeItem","window","location","href"],"mappings":";;;AAAA,OAAO,sCAAP;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,KAAT,QAAsB,kFAAtB;;;AAGA,MAAMC,IAAI,GAAG,MAAM;AAAA;;AAClB,QAAMC,OAAO,GAAGH,WAAW,EAA3B;AACA,QAAM,CAACI,CAAD,EAAGC,IAAH,IAAWP,KAAK,CAACQ,QAAN,CAAe,EAAf,CAAjB;;AACG,iBAAeC,OAAf,GAAwB;AACpB,UAAMC,IAAI,GAAG,MAAMC,KAAK,CAAC,6BAAD,EAA+B;AACnDC,MAAAA,OAAO,EAAC;AACJ,0BAAkBC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADd;AAD2C,KAA/B,CAAxB;AAKA,UAAMC,GAAG,GAAGA,GAAG,CAACC,IAAJ,EAAZ;;AACA,QAAGD,GAAG,CAACE,MAAJ,KAAc,IAAjB,EAAsB;AACdV,MAAAA,IAAI,CAACQ,GAAG,CAACT,CAAL,CAAJ;AAEP,KAHD,MAGK;AACDY,MAAAA,KAAK,CAACH,GAAG,CAACI,KAAL,CAAL;AACH;AACJ;;AAGJnB,EAAAA,KAAK,CAACoB,SAAN,CAAgB,MAAM;AACrB,UAAMC,KAAK,GAAGR,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACMQ,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;;AACN,QAAIA,KAAJ,EAAW;AACV,YAAMG,IAAI,GAAGvB,SAAS,CAACoB,KAAD,CAAtB;AACSC,MAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;;AAET,UAAI,CAACC,IAAL,EAAW;AACEF,QAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AAEZV,QAAAA,YAAY,CAACY,UAAb,CAAwB,OAAxB;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,QAArB;AACA,OALD,MAKO;AACMN,QAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AAEZd,QAAAA,OAAO;AACP;AACD;AACD,GAnBD,EAmBG,EAnBH;AAsBA,sBACC;AAAA,2BACC;AAAA,oCAAoBH,CAAC,IAAI,aAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,UADD;AAKA,CA9CD;;GAAMF,I;UACWF,W;;;KADXE,I;AAgDN,eAAeA,IAAf","sourcesContent":["import 'bootstrap/dist/css/bootstrap.min.css';\r\nimport React from \"react\";\r\nimport jwtDecode from 'jwt-decode';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Token } from '../../../../AppData/Local/Microsoft/TypeScript/4.5/node_modules/acorn/dist/acorn';\r\n\r\n\r\nconst Home = () => {\r\n\tconst history = useNavigate()\r\n\tconst [q,setq] = React.useState('');\r\n    async function getuser(){\r\n        const data = await fetch('http:localhost:5000/users/q',{\r\n            headers:{\r\n                'x-access-token': localStorage.getItem('token'),\r\n            },\r\n        })\r\n        const req = req.json();\r\n        if(req.status ==='ok'){\r\n                setq(req.q)\r\n\r\n        }else{\r\n            alert(req.error)\r\n        }\r\n    }\r\n\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst token = localStorage.getItem('token')\r\n        console.log(token)\r\n\t\tif (token) {\r\n\t\t\tconst user = jwtDecode(token)\r\n            console.log(user)\r\n            console.log('1')\r\n\r\n\t\t\tif (!user) {\r\n                console.log('2')\r\n\r\n\t\t\t\tlocalStorage.removeItem('token')\r\n\t\t\t\twindow.location.href('/login')\r\n\t\t\t} else {\r\n                console.log('3')\r\n\r\n\t\t\t\tgetuser();\r\n\t\t\t}\r\n\t\t}\r\n\t}, [])\r\n\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>server response{q || 'no response'}</h1>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Home\r\n"]},"metadata":{},"sourceType":"module"}